/* ------------------------------------------------------------------------------------------------------------
 (abjad 3.0)
TITLE:: FoscBarLine


SUMMARY:: Returns a FoscBarLine.


DESCRIPTION:: Create a bar line.


USAGE::

• FoscBarLine (abjad 3.0)

Bar line.


'''
Attach a final bar line.

code::
a = FoscStaff(FoscLeafMaker().(#[60,62,64,65], [1/4]));
m = FoscBarLine("|.");
a[a.lastIndex].attach(m);
a.show;
'''
------------------------------------------------------------------------------------------------------------ */
FoscBarLine : FoscObject {
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////
    // INIT
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////
    var <abbreviation;
    var <context="Staff", <formatSlot='closing';
    *new { |abbreviation|
        assert([Symbol, String].any { |type| abbreviation.isKindOf(type) });
        abbreviation = abbreviation.asString;
        ^super.new.init(abbreviation);
    }
    init { |argAbbreviation|
        abbreviation = argAbbreviation;
    }
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////
    // PUBLIC INSTANCE PROPERTIES
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////
    /* --------------------------------------------------------------------------------------------------------
    • abbreviation

    Gets abbreviation of bar line.

    Returns string.

    '''
    code::
    m = FoscBarLine("|.");
    m.abbreviation.postln;
    '''
    -------------------------------------------------------------------------------------------------------- */
    /* --------------------------------------------------------------------------------------------------------
    • context

    Gets context.

    '''
    code::
    m = FoscBarLine("|.");
    m.context.postln;
    '''
    -------------------------------------------------------------------------------------------------------- */
    /* --------------------------------------------------------------------------------------------------------
    • tweaks

    Tweaks are not implemented on bar line.

    The LilyPond \bar command refuses tweaks.

    Use overrides instead.
    -------------------------------------------------------------------------------------------------------- */
    tweaks {
        // pass
    }
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////
    // PRIVATE INSTANCE METHODS
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////
    /* --------------------------------------------------------------------------------------------------------
    • prGetLilypondFormat
    -------------------------------------------------------------------------------------------------------- */
    prGetLilypondFormat {
        ^"\\bar \"%\"".format(abbreviation);
    }
    /* --------------------------------------------------------------------------------------------------------
    • prGetLilypondFormatBundle
    -------------------------------------------------------------------------------------------------------- */
    prGetLilypondFormatBundle {
        var bundle;
        bundle = FoscLilypondFormatBundle();
        bundle.after.commands.add(this.prGetLilypondFormat);
        ^bundle;
    }
}
