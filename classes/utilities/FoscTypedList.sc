/* ------------------------------------------------------------------------------------------------------------

TITLE:: FoscTypedList


SUMMARY:: Returns a FoscTypedList.


DESCRIPTION:: A typed list.


USAGE::

'''
code::
x = FoscTypedList([1, 2, 3, 4], Number);
x.inspect;
'''
------------------------------------------------------------------------------------------------------------ */
FoscTypedList : FoscTypedSequenceableCollection {
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////
    // INIT
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////
    init { |items, argItemClass|
        collection = items ?? { [] };
        itemClass = argItemClass;
        collection = collection.collect { |item| this.prItemCoercer(item) }; // coerce type
        collection = collection.asList;
    }
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////
    // PUBLIC INSTANCE METHODS: List Modification
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////
    /* --------------------------------------------------------------------------------------------------------
    • concat

    Concatenates typed list and expr.

    Returns new typed list.

    '''
    FIXME ERROR: Message 'asList' not understood.

    code::nointerpret
    a = FoscTypedList([1, 2, 3, 4], Number);
    b = FoscTypedList([5, 6], Number);
    (a ++ b).inspect;
    '''
    -------------------------------------------------------------------------------------------------------- */
    ++ { |expr|
        var items;
        expr = this.species.new(expr, itemClass);
        items = (this.items.copy) ++ expr.items;
        ^this.species.new(items, itemClass);
    }
    /* --------------------------------------------------------------------------------------------------------
    • add

    Appends item to list.

    '''
    code::
    a = FoscTypedList([1, 2, 3, 4], Number);
    a.add(5);
    a.inspect;
    '''
    -------------------------------------------------------------------------------------------------------- */
    add { |item|
    	item = this.prItemCoercer(item);
           this.prOnInsertion(item);
       	collection.add(item);
    }
    /* --------------------------------------------------------------------------------------------------------
    • append -- REMOVE

    '''
    code::
    a = FoscTypedList([1, 2, 3, 4], Number);
    a.extend([5, 6, 7]);
    a.inspect;
    '''
    -------------------------------------------------------------------------------------------------------- */
    append { |item|
        this.add(item);
    }
    /* --------------------------------------------------------------------------------------------------------
    • addAll
    -------------------------------------------------------------------------------------------------------- */
    addAll { |items|
        items.do { |item| this.add(item) };
    }
    /* --------------------------------------------------------------------------------------------------------
    • extend -- REMOVE
    -------------------------------------------------------------------------------------------------------- */
    extend { |items|
        this.addAll(items);
    }
    /* --------------------------------------------------------------------------------------------------------
    • insert

    Inserts item at index.

    '''
    code::
    a = FoscTypedList([1, 2, 3, 4], Number);
    a.insert(1, 5);
    a.inspect;
    -------------------------------------------------------------------------------------------------------- */
    insert { |index, item|
        item = this.prItemCoercer(item);
           this.prOnInsertion(item);
       	collection.insert(index, item);
    }
    /* --------------------------------------------------------------------------------------------------------
    • pop

    Puts item at index.

    '''
    code::
    a = FoscTypedList([1, 2, 3, 4], Number);
    a.pop;
    a.inspect;
    '''
    -------------------------------------------------------------------------------------------------------- */
    /* --------------------------------------------------------------------------------------------------------
    • prepend

    Prepends item to list.

    '''
    code::
    a = FoscTypedList([1, 2, 3, 4], Number);
    a.prepend(5);
    a.inspect;
    '''
    -------------------------------------------------------------------------------------------------------- */
    prepend { |item|
        this.insert(0, item);
    }
    /* --------------------------------------------------------------------------------------------------------
    • put

    Puts item at index.

    '''
    code::
    a = FoscTypedList([1, 2, 3, 4], Number);
    a[1] = 5;
    a.inspect;
    '''
    -------------------------------------------------------------------------------------------------------- */
    put { |index, item|
        var oldItem;
        item = this.prItemCoercer(item);
        oldItem = collection[index];
           this.prOnInsertion(item);
           this.prOnRemoval(oldItem);
       	collection.put(index, item);
    }
    /* --------------------------------------------------------------------------------------------------------
    • remove

    Remove item.

    '''
    code::
    a = FoscTypedList([1, 2, 3, 4], Number);
    a.remove(3);
    a.inspect;
    '''
    -------------------------------------------------------------------------------------------------------- */
    /* --------------------------------------------------------------------------------------------------------
    • removeAt

    Remove item at index.

    '''
    code::
    a = FoscTypedList([1, 2, 3, 4], Number);
    a.removeAt(1);
    a.inspect;
    '''
    -------------------------------------------------------------------------------------------------------- */
    /* --------------------------------------------------------------------------------------------------------
    • sort

    '''
    code::
    a = FoscTypedList([5, 2, 3, 4], Number);
    a.sort;
    a.inspect;

    code::
    a = FoscTypedList([5, 2, 3, 4], Number);
    a.sort { |a, b| a > b };
    a.inspect;
    '''
    -------------------------------------------------------------------------------------------------------- */
    sort { |func|
    	collection.sort(func);
    }
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////
    // PUBLIC INSTANCE METHODS: Properties
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////
    /* --------------------------------------------------------------------------------------------------------
    • at

    Gets item at index.

    Returns item.

    '''
    code::
    a = FoscTypedList([1, 2, 3, 4], Number);
    a[2];
    '''
    -------------------------------------------------------------------------------------------------------- */
    /* --------------------------------------------------------------------------------------------------------
    • atAll

    Gets items at indices.

    Returns items.

    '''
    code::
    a = FoscTypedList([1, 2, 3, 4], Number);
    a[(2..3)];
    '''
    -------------------------------------------------------------------------------------------------------- */
    /* --------------------------------------------------------------------------------------------------------
    • includes

    Answer true if item exists in collection.

    Returns boolean.

    '''
    code::
    a = FoscTypedList([1, 2, 3, 4], Number);
    a.includes(3);
    a.includes(5);
    '''
    -------------------------------------------------------------------------------------------------------- */
    /* --------------------------------------------------------------------------------------------------------
    • indexOf (abjad: index)

    Return the first index matching item.

    Returns nonegative integer.

    '''
    code::
    a = FoscTypedList([1, 2, 3, 4], Number);
    a.indexOf(3);
    '''
    -------------------------------------------------------------------------------------------------------- */
    /* --------------------------------------------------------------------------------------------------------
    • occurrencesOf (abjad: count)

    Return the number of occurrences of item in collection.

    Returns nonegative integer.

    '''
    code::
    a = FoscTypedList([1, 2, 3, 4], Number);
    a.occurrencesOf(3);
    '''
    -------------------------------------------------------------------------------------------------------- */
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////
    // PUBLIC INSTANCE METHODS: Transformation
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////
    /* --------------------------------------------------------------------------------------------------------
    • collect

    '''
    code::
    x = FoscTypedList([1, 2, 3, 4], Number);
    x = x.collect { |each| each * 2 };
    x.inspect;
    '''
    -------------------------------------------------------------------------------------------------------- */
    /* --------------------------------------------------------------------------------------------------------
    • reject

    '''
    code::
    x = FoscTypedSequenceableCollection([1, 2, 3, 4], Number);
    x = x.reject { |each| each.even };
    x.inspect;
    '''
    -------------------------------------------------------------------------------------------------------- */
    /* --------------------------------------------------------------------------------------------------------
    • select

    '''
    code::
    x = FoscTypedSequenceableCollection([1, 2, 3, 4], Number);
    x = x.select { |each| each.even };
    x.inspect;
    '''
    -------------------------------------------------------------------------------------------------------- */
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////
    // PUBLIC INSTANCE METHODS: Display
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////
    /* --------------------------------------------------------------------------------------------------------
    • inspect

    Inspect items in collection.

    '''
    code::
    a = FoscTypedList([1, 2, 3, 4], Number);
    a.inspect;
    '''
    -------------------------------------------------------------------------------------------------------- */
}
